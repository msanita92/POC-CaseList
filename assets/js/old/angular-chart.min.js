!function(a){"use strict";if("object"==typeof exports)module.exports=a("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js"));else if("function"==typeof define&&define.amd)define(["angular","chart"],a);else{if("undefined"==typeof angular)throw new Error("AngularJS framework needs to be included, see https://angularjs.org/");if("undefined"==typeof Chart)throw new Error("Chart.js library needs to be included, see http://jtblin.github.io/angular-chart.js/");a(angular,Chart)}}(function(a,b){"use strict";function d(){var c={responsive:!0},d={Chart:b,getOptions:function(b){var d=b&&c[b]||{};return a.extend({},c,d)}};this.setOptions=function(b,e){e?c[b]=a.merge(c[b]||{},e):(e=b,c=a.merge(c,e)),a.merge(d.Chart.defaults,c)},this.$get=function(){return d}}function e(d,e){function f(a,b,c){var e=w(a,b);if(r(b)&&A(a,b,c,e)){var f=c[0],g=f.getContext("2d");b.chartGetColor=s(b);var h=t(a,b);B(b),b.chart=new d.Chart(g,{type:a,data:h,options:e}),b.$emit("chart-create",b.chart),x(f,b)}}function g(a,b){return!!(a&&b&&a.length&&b.length)&&(Array.isArray(a[0])?a.length===b.length&&a.every(function(a,c){return a.length===b[c].length}):b.reduce(h,0)>0&&a.length===b.length)}function h(a,b){return a+b}function i(b,c,d){var e={point:void 0,points:void 0};return function(f){var g=b.chart.getElementAtEvent||b.chart.getPointAtEvent,h=b.chart.getElementsAtEvent||b.chart.getPointsAtEvent;if(h){var i=h.call(b.chart,f),j=g?g.call(b.chart,f)[0]:void 0;!1!==d&&(a.equals(e.points,i)||a.equals(e.point,j))||(e.point=j,e.points=i,b[c](i,f,j))}}}function j(c,e){for(var f=a.copy(e.chartColors||d.getOptions(c).chartColors||b.defaults.global.colors),g=f.length<e.chartData.length;f.length<e.chartData.length;)f.push(e.chartGetColor());return g&&(e.chartColors=f),f.map(k)}function k(a){return"string"==typeof a&&"r"===a[0]?m(q(a)):"string"==typeof a&&"#"===a[0]?m(p(a.substr(1))):"object"==typeof a&&null!==a?a:l()}function l(){return m([n(0,255),n(0,255),n(0,255)])}function m(a){var b=a[3]||1;return a=a.slice(0,3),{backgroundColor:o(a,.2),pointBackgroundColor:o(a,b),pointHoverBackgroundColor:o(a,.8),borderColor:o(a,b),pointBorderColor:"#fff",pointHoverBorderColor:o(a,b)}}function n(a,b){return Math.floor(Math.random()*(b-a+1))+a}function o(a,b){return c?"rgb("+a.join(",")+")":"rgba("+a.concat(b).join(",")+")"}function p(a){var b=parseInt(a,16);return[b>>16&255,b>>8&255,255&b]}function q(a){var b=a.match(/^rgba?\(([\d,.]+)\)$/);if(!b)throw new Error("Cannot parse rgb value");return a=b[1].split(","),a.map(Number)}function r(a){return a.chartData&&a.chartData.length}function s(a){return"function"==typeof a.chartGetColor?a.chartGetColor:l}function t(a,b){var c=j(a,b);return Array.isArray(b.chartData[0])?u(b.chartLabels,b.chartData,b.chartSeries||[],c,b.chartDatasetOverride):v(b.chartLabels,b.chartData,c,b.chartDatasetOverride)}function u(b,c,d,e,f){return{labels:b,datasets:c.map(function(b,c){var g=a.extend({},e[c],{label:d[c],data:b});return f&&f.length>=c&&a.merge(g,f[c]),g})}}function v(b,c,d,e){var f={labels:b,datasets:[{data:c,backgroundColor:d.map(function(a){return a.pointBackgroundColor}),hoverBackgroundColor:d.map(function(a){return a.backgroundColor})}]};return e&&a.merge(f.datasets[0],e),f}function w(b,c){return a.extend({},d.getOptions(b),c.chartOptions)}function x(b,c){b.onclick=c.chartClick?i(c,"chartClick",!1):a.noop,b.onmousemove=c.chartHover?i(c,"chartHover",!0):a.noop}function y(a,b){Array.isArray(b.chartData[0])?b.chart.data.datasets.forEach(function(b,c){b.data=a[c]}):b.chart.data.datasets[0].data=a,b.chart.update(),b.$emit("chart-update",b.chart)}function z(a){return!a||Array.isArray(a)&&!a.length||"object"==typeof a&&!Object.keys(a).length}function A(a,b,c,d){return!d.responsive||0!==c[0].clientHeight||(e(function(){f(a,b,c)},50,!1),!1)}function B(a){a.chart&&(a.chart.destroy(),a.$emit("chart-destroy",a.chart))}return function(d){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartDatasetOverride:"=?"},link:function(b,e){function h(a,c){if(!a||!a.length||Array.isArray(a[0])&&!a[0].length)return void B(b);var h=d||b.chartType;if(h)return b.chart&&g(a,c)?y(a,b):void f(h,b,e)}function i(c,g){if(!z(c)&&!a.equals(c,g)){var h=d||b.chartType;h&&f(h,b,e)}}function j(c,d){z(c)||a.equals(c,d)||f(c,b,e)}c&&window.G_vmlCanvasManager.initElement(e[0]),b.$watch("chartData",h,!0),b.$watch("chartSeries",i,!0),b.$watch("chartLabels",i,!0),b.$watch("chartOptions",i,!0),b.$watch("chartColors",i,!0),b.$watch("chartDatasetOverride",i,!0),b.$watch("chartType",j,!1),b.$on("$destroy",function(){B(b)}),b.$on("$resize",function(){b.chart&&b.chart.resize()})}}}}b.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",b.defaults.global.tooltips.mode="label",b.defaults.global.elements.line.borderWidth=2,b.defaults.global.elements.rectangle.borderWidth=2,b.defaults.global.legend.display=!1,b.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var c="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return c&&(b.defaults.global.animation=!1),a.module("chart.js",[]).provider("ChartJs",d).factory("ChartJsFactory",["ChartJs","$timeout",e]).directive("chartBase",["ChartJsFactory",function(a){return new a}]).directive("chartLine",["ChartJsFactory",function(a){return new a("line")}]).directive("chartBar",["ChartJsFactory",function(a){return new a("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(a){return new a("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(a){return new a("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(a){return new a("doughnut")}]).directive("chartPie",["ChartJsFactory",function(a){return new a("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(a){return new a("polarArea")}]).directive("chartBubble",["ChartJsFactory",function(a){return new a("bubble")}]).name});